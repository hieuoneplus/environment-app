<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <div class="header-content">
        <span class="greeting">ğŸ‘‹ ChÃ o {{currentTime}}, {{userName}}!</span>
        <div class="header-actions">
          <ion-button fill="clear" size="small">
            <ion-icon name="notifications-outline" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button fill="clear" size="small">
            <ion-icon name="settings-outline" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content">
  <!-- No User State -->
  <div *ngIf="!userName && !isLoading" class="no-data-container">
    <p>Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ xem dá»¯ liá»‡u</p>
  </div>

  <!-- Content - hiá»ƒn thá»‹ ngay cáº£ khi Ä‘ang load (skeleton) hoáº·c Ä‘Ã£ load xong -->
  <div *ngIf="userName">
    <!-- Loading overlay nhá» á»Ÿ gÃ³c trÃªn -->
    <div *ngIf="isLoading" class="loading-overlay">
      <p>Äang táº£i...</p>
    </div>
  <!-- Points & Badge Card -->
  <ion-card class="points-card">
    <ion-card-content>
      <div class="points-display">
        <div class="points-icon">ğŸ†</div>
        <div class="points-info">
          <div class="points-value">{{greenPoints | number}} GreenPoints</div>
          <div class="rank-badge">
            <span class="plant-icon">ğŸŒ±</span>
            <span class="rank-text">Háº¡ng: {{rank}}</span>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Habit Tracker Section -->
  <div class="section">
    <div class="section-header">
      <h2 class="section-title">
        <ion-icon name="flame" class="section-icon"></ion-icon>
        THÃ“I QUEN Cá»¦A TÃ”I
      </h2>
    </div>
    
    <ion-card class="streak-card">
      <ion-card-content>
        <div class="streak-info">
          <ion-icon name="flame" class="flame-icon"></ion-icon>
          <span class="streak-text">Chuá»—i sá»‘ng xanh: <strong>{{streak}} ngÃ y</strong></span>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-card class="habits-card">
      <ion-card-header>
        <ion-card-title>Má»¥c tiÃªu hÃ´m nay:</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div *ngIf="habits.length === 0" class="empty-habits">
          <p>ChÆ°a cÃ³ thÃ³i quen nÃ o. HÃ£y thÃªm thÃ³i quen má»›i!</p>
        </div>
        
        <ion-item *ngFor="let habit of habits" class="habit-item">
          <ion-checkbox 
            slot="start" 
            [checked]="habit.completed"
            (ionChange)="toggleHabit(habit)">
          </ion-checkbox>
          <ion-label>
            <h3>{{habit.name}}</h3>
            <p>{{habit.completed ? 'ÄÃ£ xong' : 'ChÆ°a lÃ m'}}</p>
          </ion-label>
          <ion-badge slot="end" color="success">+{{habit.points}} GP</ion-badge>
        </ion-item>
        
        <ion-button expand="block" fill="outline" class="add-habit-btn" (click)="addHabit()">
          <ion-icon name="add" slot="start"></ion-icon>
          ThÃªm thÃ³i quen
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Nearby Locations Section -->
  <div class="section">
    <div class="section-header">
      <h2 class="section-title">
        <ion-icon name="location" class="section-icon"></ion-icon>
        Gáº¦N Báº N CÃ“ GÃŒ?
      </h2>
    </div>
    
    <div *ngIf="nearbyLocations.length === 0" class="empty-locations">
      <p>KhÃ´ng cÃ³ Ä‘á»‹a Ä‘iá»ƒm nÃ o gáº§n Ä‘Ã¢y</p>
    </div>
    
    <ion-card *ngFor="let location of nearbyLocations" class="location-card" button>
      <ion-card-content>
        <div class="location-content">
          <div class="location-info">
            <h3>ğŸª {{location.name}}</h3>
            <p>{{location.distance || 'N/A'}} - TÃ­ch Ä‘iá»ƒm ngay</p>
          </div>
          <ion-icon name="chevron-forward-outline" class="arrow-icon"></ion-icon>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
  </div>
</ion-content>
