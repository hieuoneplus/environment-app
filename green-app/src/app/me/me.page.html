<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <div class="header-content">
        <span>H·ªì S∆° C·ªßa T√¥i</span>
        <ion-button fill="clear" size="small" (click)="logout()">
          <ion-icon name="log-out-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="profile-content">
  <div *ngIf="!userProfile && isLoading" class="loading-container">
    <p>ƒêang t·∫£i...</p>
  </div>

  <div *ngIf="userProfile">
    <!-- Profile Header Card -->
    <ion-card class="profile-header-card">
      <ion-card-content>
        <div class="profile-header">
          <ion-avatar class="profile-avatar">
            <span class="avatar-text">{{userProfile.name?.charAt(0) || 'U'}}</span>
          </ion-avatar>
          <div class="profile-info">
            <h2 class="profile-name">{{userProfile.name || 'Ch∆∞a c·∫≠p nh·∫≠t'}}</h2>
            <div class="profile-points">
              <ion-icon name="trophy" class="trophy-icon"></ion-icon>
              <span class="points-text">{{userProfile.greenPoints | number}} GreenPoints</span>
            </div>
            <div class="profile-rank">
              <span class="rank-badge">{{userProfile.rank || 'Ch∆∞a c√≥ h·∫°ng'}}</span>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Personal Information Card -->
    <ion-card class="info-card">
      <ion-card-header>
        <ion-card-title>Th√¥ng Tin C√° Nh√¢n</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item class="info-item">
          <ion-icon name="person" slot="start" class="info-icon"></ion-icon>
          <ion-label>
            <h3>H·ªç v√† t√™n</h3>
            <p>{{userProfile.name || 'Ch∆∞a c·∫≠p nh·∫≠t'}}</p>
          </ion-label>
        </ion-item>

        <ion-item class="info-item">
          <ion-icon name="location" slot="start" class="info-icon"></ion-icon>
          <ion-label>
            <h3>ƒê·ªãa ch·ªâ</h3>
            <p>{{userProfile.address || 'Ch∆∞a c·∫≠p nh·∫≠t'}}</p>
          </ion-label>
        </ion-item>

        <ion-item class="info-item">
          <ion-icon [name]="getGenderIcon()" slot="start" class="info-icon"></ion-icon>
          <ion-label>
            <h3>Gi·ªõi t√≠nh</h3>
            <p>{{getGenderText()}}</p>
          </ion-label>
        </ion-item>

        <ion-item class="info-item">
          <ion-icon name="calendar" slot="start" class="info-icon"></ion-icon>
          <ion-label>
            <h3>Ng√†y th√°ng nƒÉm sinh</h3>
            <p>{{getFormattedDate()}}</p>
          </ion-label>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Points Card -->
    <ion-card class="points-summary-card">
      <ion-card-content>
        <div class="points-summary">
          <div class="points-icon-large">üèÜ</div>
          <div class="points-details">
            <div class="points-label">T·ªïng ƒëi·ªÉm th∆∞·ªüng</div>
            <div class="points-value-large">{{userProfile.greenPoints | number}} GP</div>
            <div class="streak-info" *ngIf="userProfile.streak">
              <ion-icon name="flame"></ion-icon>
              <span>Chu·ªói: {{userProfile.streak}} ng√†y</span>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons-section">
    <ion-button expand="block" fill="outline" class="action-btn" (click)="openMyRewards()">
      <ion-icon name="gift" slot="start"></ion-icon>
      Ph·∫ßn qu√† ƒë√£ ƒë·ªïi
    </ion-button>
    <ion-button expand="block" fill="outline" class="action-btn settings-btn" (click)="openSettings()">
      <ion-icon name="settings-outline" slot="start"></ion-icon>
      C√†i ƒë·∫∑t
    </ion-button>
  </div>
</ion-content>
